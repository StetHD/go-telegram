language: go
go:
  - 1.4
  - tip

branches:
  only:
    - master

git:
  submodules: false

before_install:
  - git submodule update --init --recursive
  - ( cd lib/tgl && ./configure && make )

install:
  - go build -x -v ./...

script:
  - go test -v
  - go test -i -race ./...
  - go test -v -race ./...

notifications:
  email:
    recipients:
      - gloob@litio.org
    on_success: change
    on_failure: always
